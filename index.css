@import './theme/tech-control.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========== 全局基础样式（使用主题变量）========== */
html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-body);
  color: var(--color-text);
  background: var(--bg-app-fallback);
  background: var(--bg-app);
  transition: color var(--transition-base) var(--ease-out),
    background var(--transition-base) var(--ease-out);
}

.font-display { font-family: var(--font-display); }
.font-body { font-family: var(--font-body); }
.mono { font-family: var(--font-mono); }

/* ========== 滚动条（主题色）========== */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}

.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) transparent;
}
.custom-scrollbar::-webkit-scrollbar { height: 6px; width: 6px; }
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}

/* ========== Markdown 内容（主题变量）========== */
.markdown-body table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: var(--text-sm); }
.markdown-body th {
  background: var(--color-surface-muted);
  text-align: left;
  padding: var(--space-3);
  border: 1px solid var(--color-border);
  font-weight: var(--font-bold);
  text-transform: uppercase;
  font-size: var(--text-xs);
}
.markdown-body td { padding: var(--space-3); border: 1px solid var(--color-border); }
.markdown-body ul { list-style-type: disc; padding-left: var(--space-6); margin: 1rem 0; }
.markdown-body p { margin: var(--space-3) 0; }
.markdown-body h2 {
  font-size: var(--text-xl);
  font-weight: var(--font-black);
  margin-top: var(--space-6);
  border-bottom: 2px solid var(--color-border-muted);
  padding-bottom: var(--space-2);
}

/* ========== 应用背景（渐变 + 降级）========== */
.app-bg {
  background: var(--bg-app-fallback);
  background: var(--bg-app);
}

/* ========== 主题色强制应用（确保 Tailwind 类生效）========== */
@layer utilities {
  .bg-primary { background-color: var(--color-primary); }
  .bg-primary-50 { background-color: var(--color-primary-50); }
  .bg-primary-100 { background-color: var(--color-primary-100); }
  .bg-primary-500 { background-color: var(--color-primary-500); }
  .bg-primary-700 { background-color: var(--color-primary-700); }
  .text-primary { color: var(--color-primary); }
  .text-primary-700 { color: var(--color-primary-700); }
  .border-primary { border-color: var(--color-primary); }
  .border-primary-50 { border-color: var(--color-primary-50); }
  .border-primary-100 { border-color: var(--color-primary-100); }
  .bg-surface { background-color: var(--color-surface); }
  .bg-surface-muted { background-color: var(--color-surface-muted); }
  .text-text { color: var(--color-text); }
  .text-text-secondary { color: var(--color-text-secondary); }
  .text-text-muted { color: var(--color-text-muted); }
  .border-border { border-color: var(--color-border); }
  .border-border-muted { border-color: var(--color-border-muted); }
  .hover\:border-primary:hover { border-color: var(--color-primary); }
  .hover\:text-primary:hover { color: var(--color-primary); }
  .hover\:bg-primary:hover { background-color: var(--color-primary); }
  .hover\:bg-primary-50:hover { background-color: var(--color-primary-50); }
  .focus\:ring-primary:focus { --tw-ring-color: var(--color-primary); }
  .rounded-card { border-radius: var(--radius-card); }
  .rounded-input { border-radius: var(--radius-input); }
  .shadow-card { box-shadow: var(--shadow-card); }
  .shadow-subtle { box-shadow: var(--shadow-subtle); }
}

/* ========== 过渡工具类 ========== */
.transition-theme {
  transition: color var(--transition-base) var(--ease-out),
    background var(--transition-base) var(--ease-out),
    border-color var(--transition-base) var(--ease-out),
    box-shadow var(--transition-base) var(--ease-out);
}

/* ========== 动画 ========== */
@keyframes progress {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}
.animate-progress {
  animation: progress 2s infinite linear;
}

@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes modal-in {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes modal-out {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.96); }
}
@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes overlay-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}
.animate-fade-in-up {
  animation: fade-in-up 0.3s var(--ease-out) forwards;
}
.animate-modal-in {
  animation: modal-in 0.25s var(--ease-out) forwards;
}
.animate-modal-out {
  animation: modal-out 0.2s var(--ease-out) forwards;
}
.animate-overlay-in {
  animation: overlay-fade-in 0.2s var(--ease-out) forwards;
}
.animate-overlay-out {
  animation: overlay-fade-out 0.2s var(--ease-out) forwards;
}
.animate-stagger > * {
  animation: fade-in-up 0.35s var(--ease-out) forwards;
  opacity: 0;
}
.animate-stagger > *:nth-child(1) { animation-delay: 0.02s; }
.animate-stagger > *:nth-child(2) { animation-delay: 0.04s; }
.animate-stagger > *:nth-child(3) { animation-delay: 0.06s; }
.animate-stagger > *:nth-child(4) { animation-delay: 0.08s; }
.animate-stagger > *:nth-child(5) { animation-delay: 0.1s; }
.animate-stagger > *:nth-child(6) { animation-delay: 0.12s; }
.animate-stagger > *:nth-child(7) { animation-delay: 0.14s; }
.animate-stagger > *:nth-child(8) { animation-delay: 0.16s; }
